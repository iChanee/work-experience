<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회사명 | CTI Media</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/sub-page.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html"><img src="images/company_logo.jpg" alt="회사 로고"></a>
            </div>
            <nav>
                <ul>
                    <li class="dropdown">
                        <a href="company-intro.html">회사 소개</a>
                        <div class="dropdown-content">
                            <a href="company-intro.html#greeting">인사말</a>
                            <a href="company-intro.html#business-areas">사업 분야</a>
                            <a href="company-intro.html#partners">협력사</a>
                            <a href="company-intro.html#welfare">복리후생</a>
                        </div>
                    </li>
                    <li class="dropdown">
                        <a href="cti-media.html">CTI Media</a>
                        <div class="dropdown-content">
                            <a href="#company-landscape">회사 풍경</a>
                            <a href="#employee-talk">현직자 소통</a>
                            <a href="#web-magazine-full">웹 매거진</a>
                        </div>
                    </li>
                    <li class="dropdown">
                        <a href="board.html">게시판</a>
                        <div class="dropdown-content">
                            <a href="board.html#community">커뮤니티</a>
                            <a href="board.html#inquiry-full">문의</a>
                        </div>
                    </li>
                    <li class="dropdown">
                        <a href="careers.html">인재/채용</a>
                        <div class="dropdown-content">
                            <a href="careers.html#ideal-talent">인재상</a>
                            <a href="careers.html#job-categories">직무 구분</a>
                            <a href="careers.html#successful-cases">우수 합격 사례</a>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section id="company-landscape" class="main-page-section">
            <div class="container">
                <h2>회사 풍경</h2>
                <h3 style="margin-bottom:32px; text-align:center;">한눈에 보는 우리 회사, 미리 확인해 보세요!</h3>
                <div class="office-photo-row">
                    <!-- 카드 하나마다 썸네일과 원본 이미지 경로 분리 -->
                    <div class="office-photo-card" data-caption="회사 입구"
                        data-full="https://pds.saramin.co.kr/workenv-bg/202303/28/rs7qir_o8db-yd17ij_workenv-bg.jpg">
                        <img src="https://pds.saramin.co.kr/workenv-bg/202303/28/rs7qir_o8db-yd17ij_workenv-bg.jpg/sri/resize/306x220" alt="회사 입구" />
                        <div class="photo-overlay">
                            <span class="zoom-icon">&#128269;</span>
                            <span class="photo-caption">회사 입구</span>
                        </div>
                    </div>
                    <div class="office-photo-card" data-caption="회의실"
                        data-full="https://pds.saramin.co.kr/workenv-bg/202303/28/rs7qjl_nqvp-yd17ij_workenv-bg.jpg">
                        <img src="https://pds.saramin.co.kr/workenv-bg/202303/28/rs7qjl_nqvp-yd17ij_workenv-bg.jpg/sri/resize/306x220" alt="회의실" />
                        <div class="photo-overlay">
                            <span class="zoom-icon">&#128269;</span>
                            <span class="photo-caption">회의실</span>
                        </div>
                    </div>
                    <div class="office-photo-card" data-caption="사무실 복도"
                        data-full="https://pds.saramin.co.kr/workenv-bg/202303/28/rs7rdh_ww3c-yd17ij_workenv-bg.jpg">
                        <img src="https://pds.saramin.co.kr/workenv-bg/202303/28/rs7rdh_ww3c-yd17ij_workenv-bg.jpg/sri/resize/306x220" alt="사무실 복도" />
                        <div class="photo-overlay">
                            <span class="zoom-icon">&#128269;</span>
                            <span class="photo-caption">사무실 복도</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 라이트박스 모달 -->
            <div id="lightbox" class="lightbox">
                <span class="close">&times;</span>
                <img class="lightbox-img" src="" alt="">
                <div class="lightbox-caption"></div>
            </div>
        </section>

        <section id="employee-talk" class="main-page-section">
          <div class="container">
            <h2>현직자 소통</h2>
            <p style="text-align:center; margin-bottom:32px;">실제 직원들의 생생한 인터뷰를 확인해보세요.</p>

            <div class="employee-carousel-wrapper">
              <button class="carousel-nav prev-employee">&#8249;</button>
              <div class="employee-carousel">
                <!-- 직원 카드 1 -->
                <div class="employee-card">
                  <img src="images/인물사진.png" alt="홍길동" class="employee-photo"> <!-- 이미지 경로는 실제 이미지로 변경 -->
                  <h3>홍길동 대리</h3>
                  <p class="employee-role">개발팀</p>
                  <p class="employee-quote">“CTI는 도전의 기회를 열어주는 곳입니다.”</p>
                  <button class="detail-btn" onclick="window.open('https://www.youtube.com/watch?v=mV7ZrSk8LQE', '_blank')">자세히 보기</button> <!-- 인터뷰 영상 경로는 실제 경로로 변경 -->
                </div>
                <!-- 직원 카드 2 -->
                <div class="employee-card">
                  <img src="images/인물사진.png" alt="임꺽정" class="employee-photo"> 
                  <h3>임꺽정 사원</h3>
                  <p class="employee-role">인사팀</p>
                  <p class="employee-quote">“서로 존중하는 문화가 일의 원동력이 됩니다.”</p>
                  <button class="detail-btn" onclick="window.open('https://www.youtube.com/watch?v=mV7ZrSk8LQE', '_blank')">자세히 보기</button>
                </div>
                <!-- 직원 카드 3 -->
                <div class="employee-card">
                  <img src="images/인물사진.png" alt="이순신" class="employee-photo">
                  <h3>이순신 과장</h3>
                  <p class="employee-role">영업팀</p>
                  <p class="employee-quote">“현장의 목소리를 반영하는 기업입니다.”</p>
                  <button class="detail-btn" onclick="window.open('https://www.youtube.com/watch?v=mV7ZrSk8LQE', '_blank')">자세히 보기</button>
                </div>
                <!-- 직원 카드 4 -->
                <div class="employee-card">
                  <img src="images/인물사진.png" alt="이성계" class="employee-photo">
                  <h3>이성계 부장</h3>
                  <p class="employee-role">운영팀</p>
                  <p class="employee-quote">“현장의 목소리를 반영하는 기업입니다.”</p>
                  <button class="detail-btn" onclick="window.open('https://www.youtube.com/watch?v=mV7ZrSk8LQE', '_blank')">자세히 보기</button>
                </div>
              </div>
              <button class="carousel-nav next-employee">&#8250;</button>
            </div>
          </div>
        </section>


        <section id="web-magazine-full" class="main-page-section">
  <div class="container webmagazine-container">
    <div class="webmagazine-header">
      <h2>웹 매거진</h2>
      <div style="flex:1"></div>
      <button id="webzineWriteBtn" class="webzine-write-btn" style="display:none;">글쓰기</button>
    </div>
    <p style="margin-bottom: 24px; color:#555;">
      회사의 최신 소식, 업계 트렌드, 흥미로운 스토리를 웹 매거진에서 만나보세요.
    </p>
    <table class="webzine-table">
      <thead>
        <tr>
          <th style="width:70px;">번호</th>
          <th>제목</th>
          <th style="width:100px;"></th>
        </tr>
      </thead>
      <tbody id="webzineList"></tbody>
    </table>
    <div id="webzine-empty" style="display:none; text-align:center; color:#888; padding:50px 0;">등록된 매거진이 없습니다.</div>
  </div>
</section>

    </main>

    <footer>
		<section id="footer">
        <!--
			<div class="copy_bar">
				<div>
					<p class="copy_menu"><a href="https://www.cti-korea.com/bbs/content.php?co_id=privacy" >개인정보처리방침</a>  &nbsp;&nbsp;&nbsp; <a href="https://www.cti-korea.com/bbs/content.php?co_id=provision" >이용약관</a> &nbsp;&nbsp;&nbsp; <a href="https://www.cti-korea.com/bbs/board.php?bo_table=notice" alt="공지사항" title="공지사항">공지사항</a></p>
				</div>
			</div>
            //-->
			<div class="copy_area">
				<div class="copyright">
					<p>
						<span>씨티아이코리아 주식회사</span>
						<span>대표 : 채현병</span>
						<span>주소 : 충남 천안시 서북구 백석공단1로 10 천안미래에이스하이테크시티 M동 327호</span>
						<span>사업자등록번호 : 312-86-05805</span><br class="pc_br">
						<span>TEL : 041-557-5200</span>
						<span>FAX : 041-557-5204</span>
						<span>개인정보책임관리자 : 채현병</span>
						<span>이메일 : cti@cti-korea.com</span><br class="pc_br">
						<span>Copyright 2020 CTI Korea Co.,Ltd. All Rights Reserved.</span>
					</p>
				</div>
			</div>


		</section>
	</footer>

    <script src="js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
  // 관리자 여부 확인
  let isAdmin = false;
  try {
    const meRes = await fetch('/api/me', { credentials: 'include' });
    const me = await meRes.json();
    isAdmin = me.role === 'admin';
  } catch {}
  // 글쓰기 버튼
  const writeBtn = document.getElementById('webzineWriteBtn');
  if (isAdmin) writeBtn.style.display = '';
  else writeBtn.style.display = 'none';
  writeBtn.onclick = () => location.href = 'write-webmagazine.html';

  // 글 목록 불러오기
  const res = await fetch('/api/posts?type=webmagazine');
  const posts = await res.json();
  const tbody = document.getElementById('webzineList');
  const emptyDiv = document.getElementById('webzine-empty');
  if (!posts.length) {
    emptyDiv.style.display = '';
    return;
  } else {
    emptyDiv.style.display = 'none';
  }
  posts.forEach((p, idx) => {
    const tr = document.createElement('tr');
    let manageTd = '';
    // 관리자면 삭제 버튼 노출
    if (isAdmin) {
      manageTd = `<td>
        <button class="webzine-manage-btn" onclick="deleteWebzine(${p.post_id})">삭제</button>
      </td>`;
    } else {
      manageTd = `<td></td>`;
    }
    tr.innerHTML = `<td style="text-align:center;">${posts.length - idx}</td>
      <td><a href="webmagazine-detail.html?id=${p.post_id}&type=webmagazine" class="webzine-title-link">${p.title}</a></td>
      ${manageTd}`;
    tbody.appendChild(tr);
  });

  // 삭제 함수(관리자만)
  window.deleteWebzine = async function(postId) {
    if (!confirm('정말 삭제하시겠습니까?')) return;
    const res = await fetch(`/api/posts/${postId}?type=webmagazine`, {
      method: 'DELETE',
      credentials: 'include'
    });
    if (res.ok) location.reload();
    else alert('삭제 실패 (권한 또는 서버 오류)');
  };
});

    </script>
</body>
</html>